<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta name="baidu-site-verification" content="093lY4ziMu" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, user-scalable=no"
  />
  <meta name="description" content="A hexo theme" />
  <meta name="keyword" content="dusign, hexo-theme-snail" />
  <link rel="shortcut icon" href="/img/ironman-draw.png" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v3/dist/waline.css"
  />
  <link rel="stylesheet" href="/css/walineRoot.css" />
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
  <title>
     Elasticsearch Service Practice - BlueHorizon 
  </title>

  <link
    rel="canonical"
    href="https://dusign.net/2024/10/11/Elasticsearch-install/"
  />

  <!-- Bootstrap Core CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">


  <!-- Custom CSS -->
   
<link rel="stylesheet" href="/css/dusign-light.css">
 
<link rel="stylesheet" href="/css/dusign-common-light.css">
 
<link rel="stylesheet" href="/css/font-awesome.css">
 
<link rel="stylesheet" href="/css/toc.css">

  <!-- background effects end -->
  

  <!-- Pygments Highlight CSS -->
  
<link rel="stylesheet" href="/css/highlight.css">
 
<link rel="stylesheet" href="/css/widget.css">
 
<link rel="stylesheet" href="/css/rocket.css">

  
<link rel="stylesheet" href="/css/signature.css">
 
<link rel="stylesheet" href="/css/fonts.googleapis.css">


  <link
    rel="stylesheet"
    href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"
  />

  <!-- photography -->
  
<link rel="stylesheet" href="/css/photography.css">


  <!-- ga & ba script hoook -->
  <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('es.jpeg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/Just-do-it-white.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Elasticsearch" title="Elasticsearch">Elasticsearch</a>
                            
                        </div>
                        <h1>Elasticsearch Service Practice</h1>
                        <h2 class="subheading">Detailed steps to install elasticsearch</h2>
                        <span class="meta">
                            Posted by y138g on
                            2024-10-11
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">1.2k</span> and
                                Reading Time <span class="post-count">6</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- ä¸è’œå­ç»Ÿè®¡ start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- ä¸è’œå­ç»Ÿè®¡ end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">BlueHorizon</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/photography/">Photography</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="YOUR_CHINESE_BLOG_URL" target="_blank">Chinese Blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <h1 id="Install-Elasticsearch-Service"><a href="#Install-Elasticsearch-Service" class="headerlink" title="Install Elasticsearch Service"></a>Install Elasticsearch Service</h1><blockquote>
<p>When we need to design projects related to search engines, we often need to use the Elasticsearch technology. Here we will use a shopping mall project to demonstrate</p>
<p>åœ¨æˆ‘ä»¬éœ€è¦è®¾è®¡æœ‰å…³æœç´¢å¼•æ“çš„é¡¹ç›®æ—¶ï¼Œå¾€å¾€éœ€è¦ç”¨åˆ° Elasticsearch è¿™é¡¹æŠ€æœ¯ï¼Œåœ¨è¿™é‡Œå°†ç”¨ä¸€ä¸ªå•†åœºé¡¹ç›®æ¥è¿›è¡Œæ¼”ç¤º</p>
<p>ğŸ‘‰ The operation is based on centos7 system</p>
<p>ğŸ‘‰ æ“ä½œåŸºäº centos7 ç³»ç»Ÿ</p>
</blockquote>
<p>In the shopping mall project, front-end users need to search for products to find the products they need, but the search performance of the database is far inferior to that of search engines, so we need to synchronize the product information in the database to Elasticsearch, and the user performs the search in ES Product search.</p>
<p>åœ¨å•†åœºé¡¹ç›®ä¸­ï¼Œå‰å°ç”¨æˆ·éœ€è¦è¿›è¡Œå•†å“æœç´¢ä»è€Œæ‰¾åˆ°è‡ªå·±éœ€è¦çš„å•†å“ï¼Œè€Œæ•°æ®åº“çš„æœç´¢æ€§èƒ½è¿œè¿œæ¯”ä¸ä¸Šæœç´¢å¼•æ“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°†æ•°æ®åº“ä¸­çš„å•†å“ä¿¡æ¯åŒæ­¥åˆ° Elasticsearch ä¸­ï¼Œç”¨æˆ·åœ¨ ES ä¸­è¿›è¡Œå•†å“æœç´¢ã€‚</p>
<hr>
<p>First install Elasticsearch and kibana:</p>
<p>é¦–å…ˆå®‰è£… Elasticsearch å’Œ kibanaï¼š</p>
<ol>
<li><p>Modify the maximum number of files that can be created in the system</p>
<p>ä¿®æ”¹ç³»ç»Ÿæœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Open system file:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰“å¼€ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Configure the maximum number of files that can be created</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®æœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°ï¼š</span></span><br><span class="line">vm.max_map_count=655360</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Configuration takes effect:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®ç”Ÿæ•ˆï¼š</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Use the rz command to upload the ES compressed package to the virtual machine/server</p>
<p>ä½¿ç”¨ rz å‘½ä»¤å°† ES å‹ç¼©åŒ…ä¸Šä¼ è‡³è™šæ‹Ÿæœº/æœåŠ¡å™¨</p>
</li>
</ol>
<ol>
<li><p>Unzip ES</p>
<p>è§£å‹ ES</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹ï¼š</span></span><br><span class="line">tar -zxvf elasticsearch-7.17.0-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> rename:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å‘½åï¼š</span></span><br><span class="line">mv elasticsearch-7.17.0 elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> move a folder</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç§»åŠ¨æ–‡ä»¶å¤¹ï¼š</span></span><br><span class="line">mv elasticsearch /usr/local/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Use the rz command to upload the IK word segmenter and the Pinyin word segmenter to the virtual machine/server</p>
<p>ä½¿ç”¨ rz å‘½ä»¤å°† IK åˆ†è¯å™¨å’Œæ‹¼éŸ³åˆ†è¯å™¨ä¸Šä¼ è‡³è™šæ‹Ÿæœº/æœåŠ¡å™¨</p>
</li>
</ol>
<ol>
<li><p>Unzip the word segmenter to the plugins directory of elasticsearch</p>
<p>è§£å‹åˆ†è¯å™¨åˆ° elasticsearch çš„ plugins ç›®å½•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip ik segmenter</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹ ik åˆ†è¯å™¨</span></span><br><span class="line">unzip elasticsearch-analysis-ik-7.17.0.zip -d /usr/local/elasticsearch/plugins/analysis-ik</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Pinyin word segmenter</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹æ‹¼éŸ³åˆ†è¯å™¨</span></span><br><span class="line">unzip elasticsearch-analysis-pinyin-7.17.0.zip -d /usr/local/elasticsearch/plugins/analysis-pinyin</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Start the ES service</p>
<p>å¯åŠ¨ ES æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> create a not root user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªé root ç”¨æˆ·</span></span><br><span class="line">useradd es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> es user obtains ES folder permissions</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> es ç”¨æˆ·å–å¾— ES æ–‡ä»¶å¤¹æƒé™ï¼š</span></span><br><span class="line">chown -R es:es /usr/local/elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Switch to es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ‡æ¢ä¸º es ç”¨æˆ·ï¼š</span></span><br><span class="line">su es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Start the ES service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨ ES æœåŠ¡ï¼š</span></span><br><span class="line">ES_JAVA_OPTS="-Xms512m -Xmx512m" /usr/local/elasticsearch/bin/elasticsearch -d</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> check whether the ES service is started successfully</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢ ES æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">curl 127.0.0.1:9200</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h2 id="å®‰è£…-kibana"><a href="#å®‰è£…-kibana" class="headerlink" title="å®‰è£… kibana"></a>å®‰è£… kibana</h2><h2 id="Install-kibana"><a href="#Install-kibana" class="headerlink" title="Install kibana"></a>Install kibana</h2><ol>
<li><p>After switching back to the root user, use the rz command to upload the Kibana compressed file to the Linux virtual machine/server</p>
<p>åˆ‡æ¢å› root ç”¨æˆ·åä½¿ç”¨ rz å‘½ä»¤å°† Kibana å‹ç¼©æ–‡ä»¶ä¸Šä¼ åˆ° Linux è™šæ‹Ÿæœº/æœåŠ¡å™¨</p>
</li>
</ol>
<ol>
<li><p>Unzip</p>
<p>è§£å‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf kibana-7.17.0-linux-x86_64.tar.gz  -C /usr/local/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Modify the configuration</p>
<p>ä¿®æ”¹é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Modify the configuration file</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /usr/local/kibana-7.17.0-linux-x86_64/config/kibana.yml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add the following content</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŠ å…¥ä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kibana Host IP</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kibana ä¸»æœº IP</span></span><br><span class="line">server.host: "Host IP"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Elasticsearch paths supporting clusters (array)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Elasticsearch è·¯å¾„æ”¯æŒé›†ç¾¤ï¼ˆæ•°ç»„ï¼‰</span></span><br><span class="line">elasticsearch.hosts: ["http://127.0.0.1:9200"]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>start up kibana</p>
<p>å¯åŠ¨ kibana</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Set kibana directory permissions <span class="keyword">for</span> es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™ es ç”¨æˆ·è®¾ç½® kibana ç›®å½•æƒé™</span></span><br><span class="line">chown -R es:es /usr/local/kibana-7.17.0-linux-x86_64/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Switch to es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ‡æ¢ä¸º es ç”¨æˆ·</span></span><br><span class="line">su es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> start up kibana</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨ kibana</span></span><br><span class="line">/usr/local/kibana-7.17.0-linux-x86_64/bin/kibana</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Access address kibanaï¼š<a href="http://hostIP:5601" target="_blank" rel="noopener">http://hostIP:5601</a></p>
<p>è®¿é—® kibanaï¼š<a href="http://è™šæ‹ŸæœºIP:5601" target="_blank" rel="noopener">http://è™šæ‹ŸæœºIP:5601</a></p>
</li>
</ol>
<hr>
<h2 id="Create-product-index-in-kibana"><a href="#Create-product-index-in-kibana" class="headerlink" title="Create product index in kibana"></a>Create product index in kibana</h2><h2 id="åœ¨-kibana-ä¸­åˆ›å»ºå•†å“ç´¢å¼•"><a href="#åœ¨-kibana-ä¸­åˆ›å»ºå•†å“ç´¢å¼•" class="headerlink" title="åœ¨ kibana ä¸­åˆ›å»ºå•†å“ç´¢å¼•"></a>åœ¨ kibana ä¸­åˆ›å»ºå•†å“ç´¢å¼•</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">PUT /goods</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"settings"</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"number_of_shards"</span>: <span class="number">5</span>, </span><br><span class="line">    <span class="attr">"number_of_replicas"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"analysis"</span>: </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"analyzer"</span>: </span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"ik_pinyin"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"tokenizer"</span>:<span class="string">"ik_smart"</span>,</span><br><span class="line">          <span class="attr">"filter"</span>:<span class="string">"pinyin_filter"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"tag_pinyin"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"tokenizer"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">          <span class="attr">"filter"</span>:<span class="string">"pinyin_filter"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"filter"</span>: </span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"pinyin_filter"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"type"</span>:<span class="string">"pinyin"</span>,</span><br><span class="line">          <span class="attr">"keep_joined_full_pinyin"</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"keep_original"</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"remove_duplicated_term"</span>:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"mappings"</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"properties"</span>: </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"long"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"goodsName"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"ik_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"ik_smart"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"caption"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"ik_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"ik_smart"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"tags"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"completion"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"tag_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"tag_pinyin"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"price"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"double"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"headerPic"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"brand"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"productType"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"specification"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"properties"</span>: </span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"specificationName"</span>:</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"type"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">            <span class="attr">"index"</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">"specificationOption"</span>:</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"type"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">            <span class="attr">"index"</span>:<span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Common commands:</p>
<p> å¸¸ç”¨å‘½ä»¤:</p>
<blockquote>
<p>View es services</p>
<p>æŸ¥çœ‹ es æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ef | grep elastic</span><br></pre></td></tr></table></figure>
<p>View ki services</p>
<p>æŸ¥çœ‹kiæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ef | grep kibana</span><br></pre></td></tr></table></figure>
<p>Shutdown Service</p>
<p>å…³é—­æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 [port]</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>During the test, it was found that the JAVA project could not connect to ES because ES does not allow remote access by default. Kibana can be accessed because it is on the same server as ES, but the JAVA program cannot be accessed because it is on the development computer. We modify the es configuration file to enable the remote access function:</p>
<p>åœ¨æµ‹è¯•æ—¶ï¼Œå‘ç° JAVA é¡¹ç›®æ— æ³•è¿æ¥ ESï¼Œè¿™æ˜¯ç”±äº ES é»˜è®¤ä¸å…è®¸è¿œç¨‹è®¿é—®ã€‚kibana ç”±äºå’Œ ES åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸‹æ‰€ä»¥å¯ä»¥è®¿é—®ï¼ŒJAVA ç¨‹åºåœ¨å¼€å‘ç”µè„‘ä¸­æ‰€ä»¥æ— æ³•è®¿é—®ã€‚æˆ‘ä»¬ä¿®æ”¹ es çš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯è¿œç¨‹è®¿é—®åŠŸèƒ½ï¼š</p>
<ol>
<li><p>Open the ES configuration file</p>
<p>æ‰“å¼€ ES é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/elasticsearch/config/elasticsearch.yml</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Add the following content</p>
<p>æ·»åŠ å¦‚ä¸‹å†…å®¹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Monolithic ES environment</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å•ä½“ ES ç¯å¢ƒ</span></span><br><span class="line">discovery.type: single-node</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Allow all paths to access</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…è®¸æ‰€æœ‰è·¯å¾„è®¿é—®</span></span><br><span class="line">network.host: 0.0.0.0</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>Restart ES and kibana</p>
<p>é‡å¯ ES å’Œ kibana</p>
</li>
</ol>


        <hr />
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2024/10/11/BlueHorizon-introduce/"
              data-toggle="tooltip"
              data-placement="top"
              title="Welcome to BlueHorizon"
              >&larr; Previous Post</a
            >
          </li>
           
        </ul>

        <!-- tip start -->
         
        <div class="comment_notes">
          <p>This is copyright.</p>
        </div>
        
        <!-- tip end -->

        <!-- Music start-->
         
<link rel="stylesheet" href="/css/music-player/fonts/iconfont.css">


<link rel="stylesheet" href="/css/music-player/css/reset.css">


<link rel="stylesheet" href="/css/music-player/css/player.css">


<div class="music-player">
    <audio class="music-player__audio" ></audio>
    <div class="music-player__main">
        <div class="music-player__blur"></div>
        <div class="music-player__disc">
            <div class="music-player__image">
                <img width="100%" src="" alt="">
            </div>
            <div class="music-player__pointer"><img width="100%" src="/img/cd_tou.png" alt=""></div>
        </div>
        <div class="music-player__controls">
            <div class="music__info">
                <h3 class="music__info--title">...</h3>
                <p class="music__info--singer">...</p>
            </div>
            <div class="player-control">
                <div class="player-control__content">
                    <div class="player-control__btns">
                        <div class="player-control__btn player-control__btn--prev"><i class="iconfont icon-prev"></i></div>
                        <div class="player-control__btn player-control__btn--play"><i class="iconfont icon-play"></i></div>
                        <div class="player-control__btn player-control__btn--next"><i class="iconfont icon-next"></i></div>
                        <div class="player-control__btn player-control__btn--mode"><i class="iconfont icon-loop"></i></div>
                    </div>
                    <div class="player-control__volume">
                        <div class="control__volume--icon player-control__btn"><i class="iconfont icon-volume"></i></div>
                        <div class="control__volume--progress player_progress"></div>
                    </div>
                </div>
                <div class="player-control__content">
                    <div class="player__song--progress player_progress"></div>
                    <div class="player__song--timeProgess nowTime">00:00</div>
                    <div class="player__song--timeProgess totalTime">00:00</div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="/js/music-player/utill.js"></script>


<script src="/js/music-player/jquery.min.js"></script>

<!-- netease; qqkg -->
<!--
<script src="/js/music-player/player.js?library=config.music.library.js"></script>
-->
<script src="../../../../js/music-player/player.js?library=netease&music=https://kg.qq.com/node/play?s=7deFpz7Z26Jmv7di&g_f=share_html"></script> 
        <!-- Music end -->

        <!-- Sharing -->
        
        <div
          class="social-share"
          data-wechat-qrcode-helper=""
          align="center"
        ></div>
        <!--  css & js -->
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
        
        <!-- Sharing -->

        <!-- gitment start -->
        
        <!-- gitment end -->

        <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
        
        <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->

        <!-- disqus comment start -->
        
        <!-- disqus comment end -->

        <!-- waline comment start -->
        
        <!-- waline comment end -->
      </div>

      <!-- Tabe of Content -->
      <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Install-Elasticsearch-Service"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Install Elasticsearch Service</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#å®‰è£…-kibana"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">å®‰è£… kibana</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Install-kibana"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">Install kibana</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Create-product-index-in-kibana"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">Create product index in kibana</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#åœ¨-kibana-ä¸­åˆ›å»ºå•†å“ç´¢å¼•"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">åœ¨ kibana ä¸­åˆ›å»ºå•†å“ç´¢å¼•</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Q-amp-A"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">Q&amp;A</span></a></li></ol></li></ol>
            
          
          </div>
        </aside>
      
    


      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5><a href="/tags/">FEATURED TAGS</a></h5>
          <div class="tags">
            
            <a
              class="tag"
              href="/tags/#Elasticsearch"
              title="Elasticsearch"
              >Elasticsearch</a
            >
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr />
        <h5>FRIENDS</h5>
        <ul class="list-inline">
          
          <li>
            <a href="https://blog.csdn.net/d_Nail" target="_blank">Dusign&#39;s Blog</a>
          </li>
          
          <li>
            <a href="#" target="_blank">Dusign&#39;s Web</a>
          </li>
          
          <li>
            <a href="https://github.com/y138g" target="_blank">Dusign&#39;s Github</a>
          </li>
          
          <li>
            <a href="#" target="_blank">Other</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>

 
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function () {
    anchors.options = {
      visible: "hover",
      placement: "left",
      icon: "â„¬",
    };
    anchors
      .add()
      .remove(".intro-header h1")
      .remove(".subheading")
      .remove(".sidebar-container h5");
  });
</script>

<style type="text/css">
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/y138g">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; y138g 2024 
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe name="star" style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://dusign.net/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;ğŸŒ±&quot;,&quot;just do it&quot;,&quot;ğŸ€&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>
