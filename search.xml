<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Elasticsearch Service Practice</title>
      <link href="/2024/10/11/Elasticsearch-install/"/>
      <url>/2024/10/11/Elasticsearch-install/</url>
      
        <content type="html"><![CDATA[<h1 id="Install-Elasticsearch-Service"><a href="#Install-Elasticsearch-Service" class="headerlink" title="Install Elasticsearch Service"></a>Install Elasticsearch Service</h1><blockquote><p>When we need to design projects related to search engines, we often need to use the Elasticsearch technology. Here we will use a shopping mall project to demonstrate</p><p>åœ¨æˆ‘ä»¬éœ€è¦è®¾è®¡æœ‰å…³æœç´¢å¼•æ“çš„é¡¹ç›®æ—¶ï¼Œå¾€å¾€éœ€è¦ç”¨åˆ° Elasticsearch è¿™é¡¹æŠ€æœ¯ï¼Œåœ¨è¿™é‡Œå°†ç”¨ä¸€ä¸ªå•†åœºé¡¹ç›®æ¥è¿›è¡Œæ¼”ç¤º</p><p>ğŸ‘‰ The operation is based on centos7 system</p><p>ğŸ‘‰ æ“ä½œåŸºäº centos7 ç³»ç»Ÿ</p></blockquote><p>In the shopping mall project, front-end users need to search for products to find the products they need, but the search performance of the database is far inferior to that of search engines, so we need to synchronize the product information in the database to Elasticsearch, and the user performs the search in ES Product search.</p><p>åœ¨å•†åœºé¡¹ç›®ä¸­ï¼Œå‰å°ç”¨æˆ·éœ€è¦è¿›è¡Œå•†å“æœç´¢ä»è€Œæ‰¾åˆ°è‡ªå·±éœ€è¦çš„å•†å“ï¼Œè€Œæ•°æ®åº“çš„æœç´¢æ€§èƒ½è¿œè¿œæ¯”ä¸ä¸Šæœç´¢å¼•æ“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°†æ•°æ®åº“ä¸­çš„å•†å“ä¿¡æ¯åŒæ­¥åˆ° Elasticsearch ä¸­ï¼Œç”¨æˆ·åœ¨ ES ä¸­è¿›è¡Œå•†å“æœç´¢ã€‚</p><hr><p>First install Elasticsearch and kibana:</p><p>é¦–å…ˆå®‰è£… Elasticsearch å’Œ kibanaï¼š</p><ol><li><p>Modify the maximum number of files that can be created in the system</p><p>ä¿®æ”¹ç³»ç»Ÿæœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Open system file:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰“å¼€ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Configure the maximum number of files that can be created</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®æœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°ï¼š</span></span><br><span class="line">vm.max_map_count=655360</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Configuration takes effect:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®ç”Ÿæ•ˆï¼š</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Use the rz command to upload the ES compressed package to the virtual machine/server</p><p>ä½¿ç”¨ rz å‘½ä»¤å°† ES å‹ç¼©åŒ…ä¸Šä¼ è‡³è™šæ‹Ÿæœº/æœåŠ¡å™¨</p></li></ol><ol><li><p>Unzip ES</p><p>è§£å‹ ES</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹ï¼š</span></span><br><span class="line">tar -zxvf elasticsearch-7.17.0-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> rename:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å‘½åï¼š</span></span><br><span class="line">mv elasticsearch-7.17.0 elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> move a folder</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç§»åŠ¨æ–‡ä»¶å¤¹ï¼š</span></span><br><span class="line">mv elasticsearch /usr/local/</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Use the rz command to upload the IK word segmenter and the Pinyin word segmenter to the virtual machine/server</p><p>ä½¿ç”¨ rz å‘½ä»¤å°† IK åˆ†è¯å™¨å’Œæ‹¼éŸ³åˆ†è¯å™¨ä¸Šä¼ è‡³è™šæ‹Ÿæœº/æœåŠ¡å™¨</p></li></ol><ol><li><p>Unzip the word segmenter to the plugins directory of elasticsearch</p><p>è§£å‹åˆ†è¯å™¨åˆ° elasticsearch çš„ plugins ç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip ik segmenter</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹ ik åˆ†è¯å™¨</span></span><br><span class="line">unzip elasticsearch-analysis-ik-7.17.0.zip -d /usr/local/elasticsearch/plugins/analysis-ik</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Pinyin word segmenter</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹æ‹¼éŸ³åˆ†è¯å™¨</span></span><br><span class="line">unzip elasticsearch-analysis-pinyin-7.17.0.zip -d /usr/local/elasticsearch/plugins/analysis-pinyin</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Start the ES service</p><p>å¯åŠ¨ ES æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> create a not root user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªé root ç”¨æˆ·</span></span><br><span class="line">useradd es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> es user obtains ES folder permissions</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> es ç”¨æˆ·å–å¾— ES æ–‡ä»¶å¤¹æƒé™ï¼š</span></span><br><span class="line">chown -R es:es /usr/local/elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Switch to es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ‡æ¢ä¸º es ç”¨æˆ·ï¼š</span></span><br><span class="line">su es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Start the ES service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨ ES æœåŠ¡ï¼š</span></span><br><span class="line">ES_JAVA_OPTS="-Xms512m -Xmx512m" /usr/local/elasticsearch/bin/elasticsearch -d</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> check whether the ES service is started successfully</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢ ES æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">curl 127.0.0.1:9200</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="å®‰è£…-kibana"><a href="#å®‰è£…-kibana" class="headerlink" title="å®‰è£… kibana"></a>å®‰è£… kibana</h2><h2 id="Install-kibana"><a href="#Install-kibana" class="headerlink" title="Install kibana"></a>Install kibana</h2><ol><li><p>After switching back to the root user, use the rz command to upload the Kibana compressed file to the Linux virtual machine/server</p><p>åˆ‡æ¢å› root ç”¨æˆ·åä½¿ç”¨ rz å‘½ä»¤å°† Kibana å‹ç¼©æ–‡ä»¶ä¸Šä¼ åˆ° Linux è™šæ‹Ÿæœº/æœåŠ¡å™¨</p></li></ol><ol><li><p>Unzip</p><p>è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf kibana-7.17.0-linux-x86_64.tar.gz  -C /usr/local/</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Modify the configuration</p><p>ä¿®æ”¹é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Modify the configuration file</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /usr/local/kibana-7.17.0-linux-x86_64/config/kibana.yml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add the following content</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŠ å…¥ä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kibana Host IP</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kibana ä¸»æœº IP</span></span><br><span class="line">server.host: "Host IP"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Elasticsearch paths supporting clusters (array)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Elasticsearch è·¯å¾„æ”¯æŒé›†ç¾¤ï¼ˆæ•°ç»„ï¼‰</span></span><br><span class="line">elasticsearch.hosts: ["http://127.0.0.1:9200"]</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>start up kibana</p><p>å¯åŠ¨ kibana</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Set kibana directory permissions <span class="keyword">for</span> es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™ es ç”¨æˆ·è®¾ç½® kibana ç›®å½•æƒé™</span></span><br><span class="line">chown -R es:es /usr/local/kibana-7.17.0-linux-x86_64/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Switch to es user</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ‡æ¢ä¸º es ç”¨æˆ·</span></span><br><span class="line">su es</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> start up kibana</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨ kibana</span></span><br><span class="line">/usr/local/kibana-7.17.0-linux-x86_64/bin/kibana</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Access address kibanaï¼š<a href="http://hostIP:5601" target="_blank" rel="noopener">http://hostIP:5601</a></p><p>è®¿é—® kibanaï¼š<a href="http://è™šæ‹ŸæœºIP:5601" target="_blank" rel="noopener">http://è™šæ‹ŸæœºIP:5601</a></p></li></ol><hr><h2 id="Create-product-index-in-kibana"><a href="#Create-product-index-in-kibana" class="headerlink" title="Create product index in kibana"></a>Create product index in kibana</h2><h2 id="åœ¨-kibana-ä¸­åˆ›å»ºå•†å“ç´¢å¼•"><a href="#åœ¨-kibana-ä¸­åˆ›å»ºå•†å“ç´¢å¼•" class="headerlink" title="åœ¨ kibana ä¸­åˆ›å»ºå•†å“ç´¢å¼•"></a>åœ¨ kibana ä¸­åˆ›å»ºå•†å“ç´¢å¼•</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">PUT /goods</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"settings"</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"number_of_shards"</span>: <span class="number">5</span>, </span><br><span class="line">    <span class="attr">"number_of_replicas"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"analysis"</span>: </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"analyzer"</span>: </span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"ik_pinyin"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"tokenizer"</span>:<span class="string">"ik_smart"</span>,</span><br><span class="line">          <span class="attr">"filter"</span>:<span class="string">"pinyin_filter"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"tag_pinyin"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"tokenizer"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">          <span class="attr">"filter"</span>:<span class="string">"pinyin_filter"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"filter"</span>: </span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"pinyin_filter"</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"type"</span>:<span class="string">"pinyin"</span>,</span><br><span class="line">          <span class="attr">"keep_joined_full_pinyin"</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"keep_original"</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"remove_duplicated_term"</span>:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"mappings"</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"properties"</span>: </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"long"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"goodsName"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"ik_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"ik_smart"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"caption"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"text"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"ik_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"ik_smart"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"tags"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"completion"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"analyzer"</span>: <span class="string">"tag_pinyin"</span>,</span><br><span class="line">        <span class="attr">"search_analyzer"</span>: <span class="string">"tag_pinyin"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"price"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"double"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"headerPic"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"brand"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"productType"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"keyword"</span>,</span><br><span class="line">        <span class="attr">"index"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"specification"</span>:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"properties"</span>: </span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"specificationName"</span>:</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"type"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">            <span class="attr">"index"</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">"specificationOption"</span>:</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"type"</span>:<span class="string">"keyword"</span>,</span><br><span class="line">            <span class="attr">"index"</span>:<span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>Common commands:</p><p> å¸¸ç”¨å‘½ä»¤:</p><blockquote><p>View es services</p><p>æŸ¥çœ‹ es æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ef | grep elastic</span><br></pre></td></tr></table></figure><p>View ki services</p><p>æŸ¥çœ‹kiæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ef | grep kibana</span><br></pre></td></tr></table></figure><p>Shutdown Service</p><p>å…³é—­æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 [port]</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>During the test, it was found that the JAVA project could not connect to ES because ES does not allow remote access by default. Kibana can be accessed because it is on the same server as ES, but the JAVA program cannot be accessed because it is on the development computer. We modify the es configuration file to enable the remote access function:</p><p>åœ¨æµ‹è¯•æ—¶ï¼Œå‘ç° JAVA é¡¹ç›®æ— æ³•è¿æ¥ ESï¼Œè¿™æ˜¯ç”±äº ES é»˜è®¤ä¸å…è®¸è¿œç¨‹è®¿é—®ã€‚kibana ç”±äºå’Œ ES åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸‹æ‰€ä»¥å¯ä»¥è®¿é—®ï¼ŒJAVA ç¨‹åºåœ¨å¼€å‘ç”µè„‘ä¸­æ‰€ä»¥æ— æ³•è®¿é—®ã€‚æˆ‘ä»¬ä¿®æ”¹ es çš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯è¿œç¨‹è®¿é—®åŠŸèƒ½ï¼š</p><ol><li><p>Open the ES configuration file</p><p>æ‰“å¼€ ES é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/elasticsearch/config/elasticsearch.yml</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Add the following content</p><p>æ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Monolithic ES environment</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å•ä½“ ES ç¯å¢ƒ</span></span><br><span class="line">discovery.type: single-node</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Allow all paths to access</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…è®¸æ‰€æœ‰è·¯å¾„è®¿é—®</span></span><br><span class="line">network.host: 0.0.0.0</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Restart ES and kibana</p><p>é‡å¯ ES å’Œ kibana</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Elasticsearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Welcome to BlueHorizon</title>
      <link href="/2024/10/11/BlueHorizon-introduce/"/>
      <url>/2024/10/11/BlueHorizon-introduce/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ’«-Welcome-to-BlueHorizon"><a href="#ğŸ’«-Welcome-to-BlueHorizon" class="headerlink" title="ğŸ’« Welcome to BlueHorizon"></a>ğŸ’« Welcome to BlueHorizon</h1><p>Welcome to my blog. Here I will share technology, work, and daily photography. I hope my friends who visit my blog will have a certain gain ~</p><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œåœ¨è¿™é‡Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯ã€å·¥ä½œä»¥åŠæ‘„å½±æ—¥å¸¸ã€‚å¸Œæœ›è®¿é—®æˆ‘åšå®¢çš„å°ä¼™ä¼´èƒ½æœ‰ä¸€å®šçš„æ”¶è·ï½</p>]]></content>
      
      
      <categories>
          
          <category> welcome </category>
          
      </categories>
      
      
        <tags>
            
            <tag> welcome </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
